---
import { getCollection } from "astro:content"
import BaseLayout from "../layouts/BaseLayout.astro"

const posts = (await getCollection("blog")).sort(
  (a, b) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf()
)
---

<BaseLayout>
  <div class='mx-auto max-w-6xl px-5'>
    <h1
      class='animate-fade-right py-10 text-5xl font-bold leading-tight tracking-tighter animate-delay-300 animate-duration-[1500ms] animate-ease-in-out md:text-6xl'>
      My Blog
    </h1>
    <section>
      <div
        class='stagger-delta-100 animate-delay-stagger mb-8 grid grid-cols-1 gap-y-5 sm:grid-cols-2 sm:gap-x-6 sm:gap-y-6 lg:grid-cols-3 lg:gap-x-8 lg:gap-y-8'>
        {
          posts.map((item, id) => (
            <a
              href={`/${item.slug}`}
              style={{ "--animation-order": id /* For staggered animation */ }}
              class='scale-100 animate-fade-right cursor-pointer overflow-hidden rounded-md border border-nier-700 transition duration-100 !animate-duration-700 hover:scale-[1.02] hover:shadow active:scale-[0.97] motion-safe:transform-gpu motion-reduce:hover:scale-100 md:w-full'>
              <div class='relative select-none sm:mx-0'>
                {/* <BlogViewCount
              slug={item.slug}
              class="absolute left-0 top-0 px-3 py-2"
            />
            <BlogLikeCount
              slug={item.slug}
              class="absolute right-0 top-0 px-3 py-2"
            /> */}
                <img
                  src={item.data.heroImage ?? ""}
                  alt={`Cover Image for ${item.data.title}`}
                  class='h-auto w-full object-cover object-center'
                  width={0}
                  height={0}
                  sizes='(min-width: 768px) 347px, 192px'
                />
              </div>
              <div class='p-4'>
                <h3 class='mb-2 text-xl font-bold leading-snug hover:underline'>
                  {item.data.title}
                </h3>
                <div class='text-md mb-4 text-slate-700' />
                <p class='mb-4 text-lg leading-relaxed'>
                  {item.data.description}
                </p>
              </div>
            </a>
          ))
        }
      </div>
      <!-- <ul>
      {
        posts.map((post) => (
          <li>
            <a href={`/blog/${post.slug}/`}>
              <img width={720} height={360} src={post.data.heroImage} alt='' />
              <h4 class='title'>{post.data.title}</h4>
              <p class='date'>
                <FormattedDate date={post.data.pubDate} />
              </p>
            </a>
          </li>
        ))
      }
    </ul> -->
    </section>
  </div>
</BaseLayout>
